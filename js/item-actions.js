import{flexBox,defaultValues}from"./flex-objects.js";import{updateTimeout,updateAll}from"./update-items.js";import{addRemoveButton}from"./remove-item.js";import{getData}from"./get-data.js";import{renderElement,switchesButtonState,getMinMaxValues,setNameItem}from"./utils.js";const elementNameRu="Элемент",elementNameEn="item",primaryLoadItems=2,maxItems=15,nonRemovableItems=2;let countItems=1;const addItemButton=document.querySelector(".button--add-item"),flexContainer=document.querySelector(".parameters__items"),itemTemplate=document.querySelector("#item").content.querySelector(".parameters__fields--item"),maxItemsElement=document.querySelector(".text__max-elements"),decreaseCount=()=>countItems--,setItemData=e=>{flexBox.items[e]={...defaultValues.items}},setAttributes=(e,t)=>{e.forEach((e=>{e.setAttribute(t,setNameItem(e.getAttribute(t),"-",countItems))}))},onItemFieldsInput=e=>getData(e.target),addItem=e=>{const t=itemTemplate.cloneNode(!0),m=t.querySelector(".parameters__title--item"),o=t.querySelector(".parameters__title-text--item"),a=t.querySelectorAll(".parameters__label"),n=t.querySelectorAll(".field"),s=setNameItem("item","-",countItems),r=setNameItem("Элемент"," ",countItems);var l;setAttributes(a,"for"),setAttributes(n,"id"),t.id=s,o.textContent=r,n.forEach((e=>{getMinMaxValues(defaultValues,e),e.addEventListener("input",onItemFieldsInput)})),renderElement(flexContainer,t),l=s,flexBox.items[l]={...defaultValues.items},countItems>2&&addRemoveButton(m),e&&updateTimeout(flexBox),countItems++},onAddItemButtonClick=e=>{e.stopPropagation(),15===countItems&&switchesButtonState(addItemButton),addItem(!0)},initItemActions=()=>{addItemButton.addEventListener("click",onAddItemButtonClick),maxItemsElement.textContent=15;for(let e=1;e<=2;e++)addItem(),2===e&&updateAll(flexBox)};export{initItemActions,decreaseCount,elementNameRu,elementNameEn};